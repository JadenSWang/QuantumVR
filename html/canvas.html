<style>
	html {
		overflow-y: hidden;
		overflow-x: hidden;
	}

	.mainCanvas canvas {
		margin-top: -0.5%;
		margin-left: 3%;
		width: 94%;
	}
</style>

<p>
	<span class="mainCanvas"><canvas></canvas></span>
</p>

<script src="javascript/three.js"></script>
<script src="javascript/orbitcontrols.js"></script>
<script src="javascript/canvasGeometry.js"></script>
<script src="javascript/geometron.js"></script>
<script>
	var currentColor = 0xFFFFFF;

	// Set up the scene
	const scene = new THREE.Scene();

	// initialize the renderer
	const renderer = new THREE.WebGLRenderer({
		antialias: true, // adjust in the future
		canvas: document.querySelector(".mainCanvas canvas")
	});

	// set up the camera
	const fov = 70;
	const aspect = 2;
	const near = 1;
	const far = 1000;
	var camera = new THREE.PerspectiveCamera(fov, aspect, near, far);
	camera.position.z = 400;
	camera.zoom = 5;

	// All the blocks in the scene
	var canvasBlocks = new GeometricObjects();

	// GEOMETRON! 
	var glyphTable = new AllGlyphs();
	importCommands(glyphTable);
	var topGlyph = new Glyph();

	// light?
	var light = new THREE.PointLight(0xFFFFFF, 2, 0);
	light.position.set(200, 100, 300);
	scene.add(light);

	// Set up orbiter
	var orbit = new THREE.OrbitControls(camera, renderer.canvas);
	orbit.enableZoom = true;

	var canvas = renderer.domElement;
	var width = canvas.clientWidth;
	var height = canvas.clientHeight;

	if (canvas.width !== width || canvas.height !== height) {
		renderer.setSize(width, height, false);
		camera.aspect = width / height;
		camera.updateProjectionMatrix();
	}

	// perform the first animation request
	requestAnimationFrame(animate);

	function importCommands(glyphTable) {
		var cursorMesh = canvasBlocks._cursor._blockMesh;
		// drawing sphere
		glyphTable.addGlyph(new Action(0100, [canvasBlocks.drawCube, cursorMesh], "Draw Cube"));
		glyphTable.addGlyph(new Action(0101, [canvasBlocks.drawSphere, cursorMesh], "Draw Sphere"));
		glyphTable.addGlyph(new Action(0102, [canvasBlocks.drawCylinder, cursorMesh], "Draw Cylinder"));

		// movement
		glyphTable.addGlyph(new Action(0110, [canvasBlocks._cursor.moveUp, cursorMesh], "Move Up"));
		glyphTable.addGlyph(new Action(0111, [canvasBlocks._cursor.moveLeft, cursorMesh], "Move Left"));
		glyphTable.addGlyph(new Action(0112, [canvasBlocks._cursor.moveDown, cursorMesh], "Move Down"));
		glyphTable.addGlyph(new Action(0113, [canvasBlocks._cursor.moveRight, cursorMesh], "Move Right"));
		glyphTable.addGlyph(new Action(0114, [canvasBlocks._cursor.moveIn, cursorMesh], "Move In"));
		glyphTable.addGlyph(new Action(0115, [canvasBlocks._cursor.moveOut, cursorMesh], "Move Out"));

		glyphTable.addGlyph(new Action(0116, [canvasBlocks._cursor.rotate, cursorMesh], "Rotate"));
		glyphTable.addGlyph(new Action(0117, [canvasBlocks._cursor.tilt, cursorMesh], "Tilt"));

		glyphTable.addGlyph(new Action(0118, [canvasBlocks._cursor.resizeUp, cursorMesh], "Resize Up"));
		glyphTable.addGlyph(new Action(0119, [canvasBlocks._cursor.resizeDown, cursorMesh], "Resize Down"));
	}
</script>